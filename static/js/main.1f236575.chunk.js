(this["webpackJsonpgame-2048"]=this["webpackJsonpgame-2048"]||[]).push([[0],{14:function(e,t,r){},15:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r.n(a),c=r(4),s=r.n(c),l=r(1),i=r(5),o=r(6),u=r(8),v=r(7);function d(e){return Object(l.a)(e).reduce((function(e,t,r){var a=t.value,n=null===a,c=e[r-4],s=c&&(null===c.value||c.value===a);if(n)return[].concat(Object(l.a)(e),[{value:a,isMerged:!1}]);if(s){for(var i=r;e[i-4]&&(null===e[i-4].value||e[i-4].value===a);)i-=4;return e[i].value!==a||e[i].isMerged?(e[i]={value:a,isMerged:!1},e[r]={value:null,isMerged:!1}):(e[i]={value:2*a,isMerged:!0},e[r]={value:null,isMerged:!1}),e}return e[r]={value:a,isMerged:!1},e}),[])}function m(e){var t=function(e){return Array.from(Array(4),(function(t,r){return e.slice(4*r,4*(r+1))}))}(Object(l.a)(e));return t[0].map((function(e,r){return t.map((function(e){return e[r]})).reverse()})).flat()}var j=r(0);function f(e){var t=e.value,r=e.isNew,a=e.isMerged,n=t?"cell-".concat(t):"",c=r?"new-number":"",s=a?"merged":"";return Object(j.jsx)("div",{className:"cell ".concat(n," ").concat(c," ").concat(s),children:t})}function b(e){var t=e.score,r=e.newGame;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"title-head",children:[Object(j.jsxs)("div",{className:"title-container",children:[Object(j.jsx)("span",{className:"info-title",children:"2048"}),Object(j.jsxs)("span",{className:"info-subtitle",children:["Join the tiles, get to ",Object(j.jsx)("b",{children:"2048!"})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"score-text",children:"Score:"}),Object(j.jsx)("div",{className:"score",children:t})]})]}),Object(j.jsxs)("div",{className:"buttons-container",children:[Object(j.jsx)("button",{className:"btn",children:"Settings"}),Object(j.jsx)("button",{className:"btn",children:"Best Scores"}),Object(j.jsx)("button",{className:"btn",onClick:function(){console.log(e),r()},children:"New Game"})]})]})}var h=r.p+"static/media/rss.e13a2357.svg";function g(){return Object(j.jsxs)("div",{className:"footer",children:["Created by",Object(j.jsx)("a",{className:"footer-link",href:"https://github.com/natgeo89",rel:"noreferrer",target:"_blank",children:"Viktar Sakharuk"}),"for",Object(j.jsx)("a",{className:"footer-link",href:"https://rs.school/js/",rel:"noreferrer",target:"_blank",children:Object(j.jsx)("img",{className:"footer-image",src:h,alt:"Rolling Scope School"})}),Object(j.jsx)("span",{children:"2021"})]})}r(14);var O=function(e){Object(u.a)(r,e);var t=Object(v.a)(r);function r(e){var a;Object(i.a)(this,r),(a=t.call(this,e)).handleKeyUp=function(e){var t,r=e.key,n=a.state,c=n.cells,s=n.score;switch(r){case"ArrowUp":t=function(e){return d(e)}(c);break;case"ArrowLeft":t=function(e){var t=m(e);return m(m(m(d(t))))}(c);break;case"ArrowDown":t=function(e){var t=m(m(e));return m(m(d(t)))}(c);break;case"ArrowRight":t=function(e){var t=m(m(m(e)));return m(d(t))}(c);break;default:return}if(a.isCellsMoved(t)){var l=a.calcScorePerMove(t);if(0!==l){var i=s+l;a.saveScoreInLS(i),a.setState({score:i})}var o=a.getCellsWithNewRandomNumber(t);a.saveGameArrayInLS(o),a.setState({cells:o})}},a.createTemplateArray=function(){var e=Math.pow(4,2);return Array(e).fill({value:null})},a.createNewGame=function(){var e=a.createTemplateArray(),t=a.getCellsWithNewRandomNumber(e);a.saveScoreInLS(0),a.saveGameArrayInLS(t),a.setState({score:0,cells:t})},a.isCellsMoved=function(e){var t=Object(l.a)(e).map((function(e){return e.value})),r=Object(l.a)(a.state.cells).map((function(e){return e.value}));return JSON.stringify(t)!==JSON.stringify(r)},a.getSavedGameArray=function(){var e=localStorage.getItem("current-game");return JSON.parse(e)},a.saveGameArrayInLS=function(e){var t=Object(l.a)(e).map((function(e){return{value:e.value,isNew:e.isNew}}));localStorage.setItem("current-game",JSON.stringify(t))},a.getSavedScore=function(){return+localStorage.getItem("current-score")},a.saveScoreInLS=function(e){localStorage.setItem("current-score",e)},a.getCellsWithNewRandomNumber=function(e){var t=Object(l.a)(e),r=a.getRandomEmptyIndexFrom(t),n=Math.random()<.5?2:4;return t.map((function(e,t){var a=e.value,c=e.isMerged;return{value:r===t?n:a,isNew:r===t,isMerged:c}}))},a.getRandomEmptyIndexFrom=function(e){var t=Object(l.a)(e).reduce((function(e,t,r){return null===t.value?[].concat(Object(l.a)(e),[r]):e}),[]);return t[Math.floor(Math.random()*t.length)]},a.calcScorePerMove=function(e){return Object(l.a)(e).reduce((function(e,t){var r=t.value;return t.isMerged?e+r:e}),0)};var n=a.createTemplateArray(),c=a.getCellsWithNewRandomNumber(n),s=a.getSavedGameArray(),o=a.getSavedScore();return a.state={cells:s||c,score:o||0},a}return Object(o.a)(r,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyUp)}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsxs)("div",{className:"game-container",children:[Object(j.jsx)(b,{newGame:this.createNewGame,score:this.state.score}),Object(j.jsx)("div",{className:"game-field",children:this.state.cells.map((function(e,t){var r=e.value,a=e.isNew,n=e.isMerged;return Object(j.jsx)(f,{value:r,isNew:a,isMerged:n},t)}))})]}),Object(j.jsx)(g,{})]})}}]),r}(n.a.Component);s.a.render(Object(j.jsx)(O,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1f236575.chunk.js.map